{% extends 'base.html' %}
{% load static %}
{% block title %}Welcome to CareLink Â· Complete Your Profile{% endblock %}
{% block content %}
<div style="background: linear-gradient(135deg, var(--cl-blue) 0%, var(--cl-teal) 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-xl-7">
        <!-- Onboarding Card -->
        <div class="card" style="border: none; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.15);">
          <div class="card-body p-4 p-md-5">
            <!-- Header -->
            <div class="text-center mb-4">
              <div class="d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, var(--cl-blue), var(--cl-teal)); color: white;">
                <i class="fas fa-user-plus fa-2x"></i>
              </div>
              <h2 class="mb-2" style="color: var(--cl-text); font-weight: var(--cl-font-bold);">Welcome to CareLink!</h2>
              <p class="text-muted mb-0" style="font-size: var(--cl-base);">Let's set up your profile to provide you with personalized care</p>
            </div>

            <!-- Progress Steps -->
            <div class="mb-4">
              <div class="d-flex justify-content-between align-items-center" style="position: relative;">
                <div style="position: absolute; top: 50%; left: 0; right: 0; height: 2px; background: var(--cl-border); z-index: 0;"></div>
                <div class="text-center" style="position: relative; z-index: 1;">
                  <div class="d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px; border-radius: 50%; background: var(--cl-blue); color: white; font-weight: bold;">
                    1
                  </div>
                  <div style="font-size: var(--cl-xs); color: var(--cl-text-muted);">Account</div>
                </div>
                <div class="text-center" style="position: relative; z-index: 1;">
                  <div class="d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px; border-radius: 50%; background: var(--cl-blue); color: white; font-weight: bold;">
                    2
                  </div>
                  <div style="font-size: var(--cl-xs); color: var(--cl-text-muted);">Medical Info</div>
                </div>
                <div class="text-center" style="position: relative; z-index: 1;">
                  <div class="d-inline-flex align-items-center justify-content-center mb-2" style="width: 40px; height: 40px; border-radius: 50%; background: var(--cl-muted-bg); color: var(--cl-text-muted); font-weight: bold; border: 2px solid var(--cl-border);">
                    3
                  </div>
                  <div style="font-size: var(--cl-xs); color: var(--cl-text-muted);">Complete</div>
                </div>
              </div>
            </div>

            <!-- Info Alert -->
            <div class="alert" style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: var(--cl-radius-md); margin-bottom: 2rem;">
              <div class="d-flex gap-3">
                <i class="fas fa-info-circle" style="color: var(--cl-blue); margin-top: 0.125rem; flex-shrink: 0;"></i>
                <div>
                  <strong style="color: var(--cl-text);">Why we need this information</strong>
                  <p class="mb-0 mt-1" style="font-size: var(--cl-sm); color: var(--cl-text-muted);">
                    Your medical information helps our AI provide more accurate health assessments and personalized recommendations. All information is kept private and secure.
                  </p>
                </div>
              </div>
            </div>

            <!-- Form -->
            <form method="post">
              {% csrf_token %}

              <div class="row g-3 mb-4">
                <!-- Age Field -->
                <div class="col-md-6">
                  <label for="{{ form.age.id_for_label }}" class="form-label" style="font-weight: var(--cl-font-medium); color: var(--cl-text);">
                    <i class="fas fa-birthday-cake me-2" style="color: var(--cl-blue);"></i>Age
                    <span class="text-danger">*</span>
                  </label>
                  {{ form.age }}
                  {% if form.age.errors %}
                    <div class="text-danger mt-1" style="font-size: var(--cl-sm);">{{ form.age.errors }}</div>
                  {% endif %}
                </div>

                <!-- Weight Field -->
                <div class="col-md-6">
                  <label for="{{ form.weight.id_for_label }}" class="form-label" style="font-weight: var(--cl-font-medium); color: var(--cl-text);">
                    <i class="fas fa-weight me-2" style="color: var(--cl-blue);"></i>Weight (kg)
                    <span class="text-danger">*</span>
                  </label>
                  {{ form.weight }}
                  {% if form.weight.errors %}
                    <div class="text-danger mt-1" style="font-size: var(--cl-sm);">{{ form.weight.errors }}</div>
                  {% endif %}
                </div>

                <!-- Medical History Field -->
                <div class="col-12">
                  <label for="{{ form.medical_history.id_for_label }}" class="form-label" style="font-weight: var(--cl-font-medium); color: var(--cl-text);">
                    <i class="fas fa-notes-medical me-2" style="color: var(--cl-blue);"></i>Medical History
                  </label>
                  <small class="d-block text-muted mb-2" style="font-size: var(--cl-sm);">
                    Include any chronic conditions, past surgeries, or ongoing treatments
                  </small>
                  {{ form.medical_history }}
                  {% if form.medical_history.errors %}
                    <div class="text-danger mt-1" style="font-size: var(--cl-sm);">{{ form.medical_history.errors }}</div>
                  {% endif %}
                </div>

                <!-- Allergies Field -->
                <div class="col-12">
                  <label for="{{ form.allergies.id_for_label }}" class="form-label" style="font-weight: var(--cl-font-medium); color: var(--cl-text);">
                    <i class="fas fa-allergies me-2" style="color: var(--cl-blue);"></i>Allergies
                  </label>
                  <small class="d-block text-muted mb-2" style="font-size: var(--cl-sm);">
                    List any known allergies to medications, foods, or environmental factors
                  </small>
                  {{ form.allergies }}
                  {% if form.allergies.errors %}
                    <div class="text-danger mt-1" style="font-size: var(--cl-sm);">{{ form.allergies.errors }}</div>
                  {% endif %}
                </div>
              </div>

              <!-- Privacy Notice -->
              <div class="alert" style="background: #fef2f2; border: 1px solid #fecaca; border-radius: var(--cl-radius-md); margin-bottom: 1.5rem;">
                <div class="d-flex gap-3">
                  <i class="fas fa-lock" style="color: var(--cl-red); margin-top: 0.125rem; flex-shrink: 0;"></i>
                  <p class="mb-0" style="font-size: var(--cl-sm); color: var(--cl-text-muted);">
                    <strong style="color: var(--cl-text);">Your privacy is protected.</strong> Your medical information is encrypted and only used to improve your experience with our AI health assistant.
                  </p>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="d-flex gap-3 justify-content-between align-items-center">
                <a href="{% url 'accounts:logout' %}" class="btn btn-outline-secondary">
                  <i class="fas fa-sign-out-alt me-2"></i>Logout
                </a>
                <button type="submit" class="btn btn-primary btn-lg" style="min-width: 180px;">
                  <i class="fas fa-check-circle me-2"></i>Complete Profile
                </button>
              </div>

              <p class="text-center text-muted mt-3 mb-0" style="font-size: var(--cl-xs);">
                You can update this information anytime from your profile settings
              </p>
            </form>
          </div>
        </div>

        <!-- Help Text -->
        <div class="text-center mt-4">
          <p class="text-white mb-0" style="font-size: var(--cl-sm);">
            Need help? <a href="#" class="text-white" style="text-decoration: underline;">Contact Support</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
